<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Finezto - Browser Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .test-section {
        background: white;
        padding: 20px;
        margin: 10px 0;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .pass {
        color: green;
        font-weight: bold;
      }
      .fail {
        color: red;
        font-weight: bold;
      }
      .loading {
        color: orange;
      }
      button {
        background: #000;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      .result {
        margin-top: 10px;
        padding: 10px;
        border-radius: 5px;
      }
      .success {
        background: #d4edda;
        border: 1px solid #c3e6cb;
      }
      .error {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
      }
    </style>
  </head>
  <body>
    <h1>üß™ Finezto Browser Compatibility Test</h1>
    <p>This page tests basic functionality without React.</p>

    <div class="test-section">
      <h3>1. Basic JavaScript Test</h3>
      <div id="js-test" class="loading">Testing...</div>
    </div>

    <div class="test-section">
      <h3>2. Fetch API Test</h3>
      <button onclick="testFetch()">Test Fetch</button>
      <div id="fetch-test" class="result"></div>
    </div>

    <div class="test-section">
      <h3>3. Backend Connection Test</h3>
      <button onclick="testBackend()">Test Backend</button>
      <div id="backend-test" class="result"></div>
    </div>

    <div class="test-section">
      <h3>4. Products API Test</h3>
      <button onclick="testProducts()">Test Products API</button>
      <div id="products-test" class="result"></div>
    </div>

    <div class="test-section">
      <h3>5. Browser Information</h3>
      <div id="browser-info"></div>
    </div>

    <div class="test-section">
      <h3>Next Steps</h3>
      <button onclick="window.location.href='/'">Try Main Store</button>
      <button onclick="window.location.reload()">Reload Tests</button>
    </div>

    <script>
      // Test 1: Basic JavaScript
      function testBasicJS() {
        const testElement = document.getElementById("js-test");
        try {
          // Test various JS features
          if (
            typeof Promise !== "undefined" &&
            typeof fetch !== "undefined" &&
            typeof JSON !== "undefined"
          ) {
            testElement.innerHTML =
              '<span class="pass">‚úÖ PASS</span> - JavaScript is working';
            testElement.className = "result success";
          } else {
            throw new Error("Missing JavaScript features");
          }
        } catch (error) {
          testElement.innerHTML = `<span class="fail">‚ùå FAIL</span> - ${error.message}`;
          testElement.className = "result error";
        }
      }

      // Test 2: Fetch API
      function testFetch() {
        const testElement = document.getElementById("fetch-test");
        testElement.innerHTML =
          '<span class="loading">Testing fetch API...</span>';
        testElement.className = "result";

        fetch("https://jsonplaceholder.typicode.com/posts/1")
          .then((response) => {
            if (response.ok) {
              testElement.innerHTML =
                '<span class="pass">‚úÖ PASS</span> - Fetch API is working';
              testElement.className = "result success";
            } else {
              throw new Error(`HTTP ${response.status}`);
            }
          })
          .catch((error) => {
            testElement.innerHTML = `<span class="fail">‚ùå FAIL</span> - Fetch error: ${error.message}`;
            testElement.className = "result error";
          });
      }

      // Test 3: Backend Connection
      function testBackend() {
        const testElement = document.getElementById("backend-test");
        testElement.innerHTML =
          '<span class="loading">Testing backend connection...</span>';
        testElement.className = "result";

        fetch("https://mystore-backend-ochre.vercel.app/api/mobile/health")
          .then((response) => {
            if (response.ok) {
              return response.json().then((data) => {
                testElement.innerHTML = `<span class="pass">‚úÖ PASS</span> - Backend is reachable<br>
                                                    <small>Client: ${data.data.client}, Mobile: ${data.data.mobile}</small>`;
                testElement.className = "result success";
              });
            } else {
              throw new Error(`HTTP ${response.status}`);
            }
          })
          .catch((error) => {
            testElement.innerHTML = `<span class="fail">‚ùå FAIL</span> - Backend error: ${error.message}`;
            testElement.className = "result error";
          });
      }

      // Test 4: Products API
      function testProducts() {
        const testElement = document.getElementById("products-test");
        testElement.innerHTML =
          '<span class="loading">Testing products API...</span>';
        testElement.className = "result";

        fetch("https://mystore-backend-ochre.vercel.app/api/product/list")
          .then((response) => {
            if (response.ok) {
              return response.json().then((data) => {
                if (data.success) {
                  testElement.innerHTML = `<span class="pass">‚úÖ PASS</span> - Products API working<br>
                                                        <small>Loaded ${
                                                          data.products
                                                            ? data.products
                                                                .length
                                                            : 0
                                                        } products</small>`;
                  testElement.className = "result success";
                } else {
                  throw new Error("API returned success: false");
                }
              });
            } else {
              throw new Error(`HTTP ${response.status}`);
            }
          })
          .catch((error) => {
            testElement.innerHTML = `<span class="fail">‚ùå FAIL</span> - Products API error: ${error.message}`;
            testElement.className = "result error";
          });
      }

      // Browser Info
      function displayBrowserInfo() {
        const infoElement = document.getElementById("browser-info");
        const ua = navigator.userAgent;

        let browser = "Unknown";
        if (ua.includes("Chrome") && !ua.includes("Firefox"))
          browser = "Chrome";
        if (ua.includes("SamsungBrowser")) browser = "Samsung Internet";
        if (ua.includes("Firefox")) browser = "Firefox";
        if (ua.includes("Safari") && !ua.includes("Chrome")) browser = "Safari";

        infoElement.innerHTML = `
                <strong>Browser:</strong> ${browser}<br>
                <strong>User Agent:</strong> <small>${ua}</small><br>
                <strong>Screen:</strong> ${screen.width}x${screen.height}<br>
                <strong>Touch:</strong> ${
                  "ontouchstart" in window ? "Yes" : "No"
                }<br>
                <strong>Online:</strong> ${navigator.onLine ? "Yes" : "No"}
            `;
      }

      // Run initial tests
      window.onload = function () {
        testBasicJS();
        displayBrowserInfo();
      };
    </script>
  </body>
</html>
